!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).errorToHumanReadable=e()}(this,(function(){"use strict";const n=n=>Array(Math.max(0,n)+1).join(" "),e=(e,t)=>{const r=n(e);return r+t.replace(/\n/g,"\n"+r).replace(/\n\s+\n/g,"\n\n")},t=n=>"_"+n.join(""),r=(n,t)=>e(n,void 0===t?"undefined":JSON.stringify(t,null,n)),a=n=>"Problem with "+(0===n.length?"the given value":"a value at "+t(n)),i=(n,e,t)=>"Expecting "+(t?(n&&"an ")+"OPTIONAL ":n)+e+" but actual value is",E=(n,e,t,E,s,u)=>a(u)+"\n"+i(n,e,E)+"\n\n"+r(s,t),s=(u,o,c,l)=>{switch(u.type){case"OPTIONAL":return s(u.error,!0,c,l);case"IN_FIELD":return s(u.error,!1,c,[...l,(T=u.name,/^[a-z$_][0-9a-z$_]*$/i.test(T)?"."+T:`['${T}']`)]);case"AT_INDEX":return s(u.error,!1,c,[...l,`[${u.position}]`]);case"ONE_OF":return((n,r,a,i)=>{if(0===n.length)return"Ran into oneOf with no possibilities"+(0===i.length?"":" at "+t(i));if(1===n.length)return s(n[0],r,a,i);const E=[];for(let e=0;n.length>e;e++){const t=s(n[e],r,a,i);E.push(`(${e+1}) ${t}`)}return"All possibilities of oneOf "+(0===i.length?"":`at ${t(i)} `)+`failed in the following ${n.length} ways:\n\n`+e(a,E.join("\n\n"))})(u.errors,o,c,l);case"RUNTIME_EXCEPTION":return((e,r,a)=>"Unexpected runtime error"+(0===a.length?"":" at "+t(a))+":\n\n"+n(r)+e.message)(u.error,c,l);case"REQUIRED_FIELD":return((n,e,t,i)=>a(i)+"\n"+`Expecting an OBJECT with a FIELD named '${n}':\n\n`+r(t,e))(u.name,u.source,c,l);case"REQUIRED_INDEX":return((n,e,t,i)=>a(i)+"\n"+`Expecting an ARRAY with an ELEMENT at [${n}] but only see ${e.length} entries:\n\n`+r(t,e))(u.position,u.source,c,l);case"FAILURE":return((n,e,a,i)=>n.replace(/{(path|context|location)}/g,t(i)).replace(/{(source|json|value)}/g,r(a,e)))(u.message,u.source,c,l);case"EXPECT_STRING":return E("a ","STRING",u.source,o,c,l);case"EXPECT_BOOLEAN":return E("a ","BOOLEAN",u.source,o,c,l);case"EXPECT_INT":return E("an ","INTEGER",u.source,o,c,l);case"EXPECT_FLOAT":return E("a ","FLOAT",u.source,o,c,l);case"EXPECT_OBJECT":return E("an ","OBJECT",u.source,o,c,l);case"EXPECT_ARRAY":return E("an ","ARRAY",u.source,o,c,l);case"EXPECT_EXACT":return((n,e,t,E,s)=>a(s)+"\n"+i("an ","EXACT value "+JSON.stringify(n),t)+"\n\n"+r(E,e))(u.value,u.source,o,c,l)}var T};return(e,{indent:t=4}={})=>"INVALID_JSON"===e.type?"JSON parse error: "+e.error.message+".\n\n"+n(t)+e.source:s(e,!1,t,[])}));
//# sourceMappingURL=error-to-human-readable.min.js.map
